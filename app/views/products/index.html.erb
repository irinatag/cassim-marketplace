<div class="container">
  <h1 class="page-header">Browse all custom products</h1>

  <div id="masonry-container">
    <div class="container">
      <% @products.each do |product| %>
      <div class="box">
        <div>
          <% if product.etsy_image_url != "" && product.etsy_image_url != nil %>
          <img src="<%= product.etsy_image_url %>" alt="image" />
          <% else %>
          <img src="<%= product.image %>" alt="image" />
          <% end %>
        </div>
        <h3><%= link_to product.name.truncate(30), product_path(product) %></h3>
        <h6>Made by: <%= link_to product.vendor.name, vendor_path(product.vendor) %></h6>
        <p><%= product.description.truncate(90) %></p>
        <div><%= render "product_row", product: product, order_item: @order_item %></div>
      </div>
      <% end %>
    </div>
  </div>
</div>
<script>

$( document ).ready(function() {
    mason();
});

function mason() {
    var $container = $('#masonry-container').masonry({
            itemSelector: '.box'
        });

    $container.imagesLoaded(function(){
        $container.masonry();
    });
   }
</script>
